[workspace]
name = "job-scraper"
version = "0.1.0"
description = "LinkedIn job scraper with LLM matching and Windows notifications"
authors = ["Your Name <your.email@example.com>"]
channels = ["conda-forge"]
platforms = ["win-64"]

[dependencies]
python = ">=3.10,<3.13"
requests = ">=2.31.0"
beautifulsoup4 = ">=4.12.2"
selenium = ">=4.15.2"
python-dotenv = ">=1.0.0"
click = ">=8.1.7"
tabulate = ">=0.9.0"
openpyxl = ">=3.1.5"
openai = ">=1.52.0"
httpx = ">=0.24.1"
pypdf = ">=4.2.0"
win10toast = ">=0.9"
structlog = ">=24.4.0"
python-docx = ">=1.2.0,<2"

[feature.dev.dependencies]
pytest = ">=7.4.0"
pytest-cov = ">=4.1.0"
ruff = ">=0.1.0"
mypy = ">=1.7.0"

[tasks]
# Main application commands (run from repository root)
scrape = "python ../app/job_finder.py scrape"
loop = "python ../app/job_finder.py loop"
loop-custom = "python ../app/job_finder.py loop --interval 60"
show-jobs = "python ../app/job_finder.py show_jobs"

# Testing
test = { cmd = "pytest ../tests/ -v", depends-on = ["install-dev"] }
test-cov = { cmd = "pytest ../tests/ --cov=../app --cov-report=html --cov-report=term", depends-on = ["install-dev"] }

# Code quality
format = { cmd = "ruff format ..", depends-on = ["install-dev"] }
lint = { cmd = "ruff check --fix ..", depends-on = ["install-dev"] }
typecheck = { cmd = "mypy ..", depends-on = ["install-dev"] }
check = { depends-on = ["format", "lint", "typecheck"] }

[feature.dev.tasks]
# Override tasks to run in dev environment
test = "pytest ../tests/ -v"
test-cov = "pytest ../tests/ --cov=../app --cov-report=html --cov-report=term"
format = "ruff format .."
lint = "ruff check --fix .."
typecheck = "mypy .."

# Development setup
install-dev = "pixi install --environment dev"

[environments]
default = { solve-group = "default" }
dev = { features = ["dev"], solve-group = "default" }
